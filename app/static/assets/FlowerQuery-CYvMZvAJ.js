import{u as w}from"./flower-BR98JsfF.js";import{S as b}from"./SpeciesSelector-12FqAdVy.js";import{Q as x}from"./QueryFilter-BGiqPtNf.js";import{D as y}from"./DataTable-4gAKRNCn.js";import{d as S,r as s,p as P,c as C,g as c,b as n,j as V,k,m as t,e as D,o as m,_ as I}from"./index-CrBMAzv8.js";import"./species-Hor55KY_.js";const z={class:"flower-query-container"},B={class:"species-selector mb-4"},F=S({__name:"FlowerQuery",setup(Q){const e=w(),l=s([]),i=s({min_length:void 0,max_length:void 0,min_width:void 0,max_width:void 0,min_area:void 0,max_area:void 0}),d=[{prop:"flower_id",label:"ID",width:80},{prop:"species_id",label:"物种ID",width:100},{prop:"flower_length",label:"长度(cm)",sortable:!0},{prop:"flower_width",label:"宽度(cm)",sortable:!0},{prop:"flower_ratio",label:"长宽比",sortable:!0},{prop:"flower_area",label:"面积(cm²)",sortable:!0}],p=[{type:"range",field:"length",label:"花朵长度(cm)",minPlaceholder:"最小长度",maxPlaceholder:"最大长度",precision:2,span:12},{type:"range",field:"width",label:"花朵宽度(cm)",minPlaceholder:"最小宽度",maxPlaceholder:"最大宽度",precision:2,span:12},{type:"range",field:"area",label:"花朵面积(cm²)",minPlaceholder:"最小面积",maxPlaceholder:"最大面积",precision:2,span:12}];P(l,()=>o());const u=a=>{i.value={...a},o()},_=()=>{i.value={min_length:void 0,max_length:void 0,min_width:void 0,max_width:void 0,min_area:void 0,max_area:void 0},o()},h=a=>{e.pagination.page=a,o()},g=a=>{e.pagination.limit=a,o()},o=()=>{const a={...i.value,species_ids:l.value,page:e.pagination.page,limit:e.pagination.limit};e.fetchItems(a)};return o(),(a,r)=>{const f=D("el-alert");return m(),C("div",z,[c("div",B,[r[1]||(r[1]=c("span",{class:"mr-2"},"选择物种：",-1)),n(b,{modelValue:l.value,"onUpdate:modelValue":r[0]||(r[0]=v=>l.value=v)},null,8,["modelValue"])]),n(x,{"filter-config":p,"initial-values":i.value,onSubmit:u,onReset:_},null,8,["initial-values"]),n(y,{columns:d,data:t(e).items,total:t(e).pagination.total,"page-size":t(e).pagination.limit,loading:t(e).loading,showActions:!1,onPageChange:h,onSizeChange:g},null,8,["data","total","page-size","loading"]),t(e).error?(m(),V(f,{key:0,title:t(e).error,type:"error","show-icon":"",class:"mt-4"},null,8,["title"])):k("",!0)])}}}),T=I(F,[["__scopeId","data-v-53f67f04"]]);export{T as default};
