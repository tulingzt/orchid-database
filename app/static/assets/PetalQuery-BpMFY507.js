import{u as b}from"./petal-DWJvgA2G.js";import{S as w}from"./SpeciesSelector-12FqAdVy.js";import{Q as x}from"./QueryFilter-BGiqPtNf.js";import{D as P}from"./DataTable-4gAKRNCn.js";import{d as y,r as s,p as S,c as C,g as p,b as r,j as V,k,m as l,e as D,o as c,_ as I}from"./index-CrBMAzv8.js";import"./species-Hor55KY_.js";const z={class:"petal-query-container"},B={class:"species-selector mb-4"},Q=y({__name:"PetalQuery",setup(N){const e=b(),o=s([]),i=s({min_length:void 0,max_length:void 0,min_width:void 0,max_width:void 0,min_area:void 0,max_area:void 0}),m=[{prop:"petal_id",label:"ID",width:80},{prop:"flower_id",label:"花朵ID",width:100},{prop:"petal_length",label:"长度(cm)",sortable:!0},{prop:"petal_width",label:"宽度(cm)",sortable:!0},{prop:"petal_ratio",label:"长宽比",sortable:!0},{prop:"petal_area",label:"面积(cm²)",sortable:!0}],d=[{type:"range",field:"length",label:"花瓣长度(cm)",minPlaceholder:"最小长度",maxPlaceholder:"最大长度",precision:2,span:12},{type:"range",field:"width",label:"花瓣宽度(cm)",minPlaceholder:"最小宽度",maxPlaceholder:"最大宽度",precision:2,span:12},{type:"range",field:"area",label:"花瓣面积(cm²)",minPlaceholder:"最小面积",maxPlaceholder:"最大面积",precision:2,span:12}];S(o,()=>t());const u=a=>{i.value={...a},t()},_=()=>{i.value={min_length:void 0,max_length:void 0,min_width:void 0,max_width:void 0,min_area:void 0,max_area:void 0},t()},h=a=>{e.pagination.page=a,t()},g=a=>{e.pagination.limit=a,t()},t=()=>{const a={...i.value,species_ids:o.value,page:e.pagination.page,limit:e.pagination.limit};e.fetchItems(a)};return t(),(a,n)=>{const v=D("el-alert");return c(),C("div",z,[p("div",B,[n[1]||(n[1]=p("span",{class:"mr-2"},"选择物种：",-1)),r(w,{modelValue:o.value,"onUpdate:modelValue":n[0]||(n[0]=f=>o.value=f)},null,8,["modelValue"])]),r(x,{"filter-config":d,"initial-values":i.value,onSubmit:u,onReset:_},null,8,["initial-values"]),r(P,{columns:m,data:l(e).items,total:l(e).pagination.total,"page-size":l(e).pagination.limit,loading:l(e).loading,showActions:!1,onPageChange:h,onSizeChange:g},null,8,["data","total","page-size","loading"]),l(e).error?(c(),V(v,{key:0,title:l(e).error,type:"error","show-icon":"",class:"mt-4"},null,8,["title"])):k("",!0)])}}}),T=I(Q,[["__scopeId","data-v-9eeb396c"]]);export{T as default};
