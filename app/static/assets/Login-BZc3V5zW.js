import{d as x,u as b,r as c,a as f,c as C,b as o,w as t,e as s,o as B,f as L,g as _,h as N,i as g}from"./index-CrBMAzv8.js";const U={class:"auth-container"},q={class:"text-right"},S=x({__name:"Login",setup(F){const i=b(),w=L(),m=c(),u=c(!1),r=f({username:"",password:""}),y=f({username:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}]}),p=async()=>{var l,e;try{await((l=m.value)==null?void 0:l.validate()),u.value=!0,await i.login(r),w.push(((e=i.userInfo)==null?void 0:e.role)==="admin"?"/admin":"/user")}catch(a){console.error(a)}finally{u.value=!1}};return(l,e)=>{const a=s("el-input"),d=s("el-form-item"),v=s("el-button"),V=s("el-link"),h=s("el-form"),k=s("el-card");return B(),C("div",U,[o(k,{class:"auth-box"},{default:t(()=>[e[5]||(e[5]=_("h2",{class:"auth-title"},"兰花形态数据库系统",-1)),o(h,{ref_key:"loginForm",ref:m,model:r,rules:y,onKeyup:N(p,["enter"])},{default:t(()=>[o(d,{prop:"username"},{default:t(()=>[o(a,{modelValue:r.username,"onUpdate:modelValue":e[0]||(e[0]=n=>r.username=n),placeholder:"用户名","prefix-icon":"User"},null,8,["modelValue"])]),_:1}),o(d,{prop:"password"},{default:t(()=>[o(a,{modelValue:r.password,"onUpdate:modelValue":e[1]||(e[1]=n=>r.password=n),type:"password",placeholder:"密码","prefix-icon":"Lock","show-password":""},null,8,["modelValue"])]),_:1}),o(d,null,{default:t(()=>[o(v,{type:"primary",class:"w-full",loading:u.value,onClick:p},{default:t(()=>e[3]||(e[3]=[g(" 登录 ")])),_:1},8,["loading"])]),_:1}),_("div",q,[o(V,{type:"primary",onClick:e[2]||(e[2]=n=>l.$router.push("/register"))},{default:t(()=>e[4]||(e[4]=[g(" 立即注册 ")])),_:1})])]),_:1},8,["model","rules"])]),_:1})])}}});export{S as default};
